---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";

import { getCollection } from "astro:content";
import ProjectCard from "../components/ProjectCard.astro";

const posts = (await getCollection("projects")).sort(
  (a, b) => (b.data.startDate || (new Date(0))).valueOf() - (a.data.startDate || (new Date(0))).valueOf()
);

const companies = (await getCollection("companies")).sort(
  (a, b) => (b.data.startDate || (new Date(0))).valueOf() - (a.data.startDate || (new Date(0))).valueOf()
);

const schools = (await getCollection("schools")).sort(
  (a, b) => (b.data.startDate || (new Date(0))).valueOf() - (a.data.startDate || (new Date(0))).valueOf()
);

const contests = (await getCollection("contests")).sort(
  (a, b) => (b.data.startDate || (new Date(0))).valueOf() - (a.data.startDate || (new Date(0))).valueOf()
);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <main class="max-w-2xl m-auto w-full flex flex-col gap-12 py-16 px-4">
      <article  class="flex flex-col gap-8">
      <h1 class="text-5xl font-semibold">😊 Hi!</h1>

        <p>
          I am Tom Chauvel and I am {Math.floor((Date.now()-(new Date(2003, 5, 19)).getTime())/31556952000)} years old. Since my childhood I've been interested in science, especially computer science. To graduate in this field, I have been studying at the ESIR since 2021, at the University of Rennes (my heart's city).        </p>
      </article>
      <article class="flex flex-col gap-8">
        <h1  class="text-5xl font-semibold">Professional and associative experience</h1>

        <div class="flex flex-col gap-4">

          {
            companies.map((post) => {return <ProjectCard post={post}></ProjectCard>})
          }
        </div>
      </article>
      <article class="flex flex-col gap-8">
        <h1  class="text-5xl font-semibold">Studies</h1>

        <div class="flex flex-col gap-4">

          {
            schools.map((post) => {return <ProjectCard post={post}></ProjectCard>})
          }
        </div>
      </article>
      <article class="flex flex-col gap-8">
        <h1  class="text-5xl font-semibold">Contests</h1>

        <div class="flex flex-col gap-4">

          {
            contests.map((post) => {return <ProjectCard post={post}></ProjectCard>})
          }
        </div>
      </article>
      <article class="flex flex-col gap-8">
        <h1  class="text-5xl font-semibold">🧑‍💻 My Projects</h1>

        <div class="flex flex-col gap-4">

          {
            posts.map((post) => {return <ProjectCard post={post}></ProjectCard>})
          }
        </div>
      </article>
    </main>

    <Footer />
  </body>
</html>
